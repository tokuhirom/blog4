var j,d,ae,Be,H,oe,ue,ce,fe,Y,G,J,je,N={},pe=[],qe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,q=Array.isArray;function w(t,e){for(var _ in e)t[_]=e[_];return t}function K(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function $e(t,e,_){var n,i,r,l={};for(r in e)r=="key"?n=e[r]:r=="ref"?i=e[r]:l[r]=e[r];if(arguments.length>2&&(l.children=arguments.length>3?j.call(arguments,2):_),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)l[r]===void 0&&(l[r]=t.defaultProps[r]);return I(t,l,n,i,null)}function I(t,e,_,n,i){var r={type:t,props:e,key:_,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ae,__i:-1,__u:0};return i==null&&d.vnode!=null&&d.vnode(r),r}function S(t){return t.children}function W(t,e){this.props=t,this.context=e}function P(t,e){if(e==null)return t.__?P(t.__,t.__i+1):null;for(var _;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null)return _.__e;return typeof t.type=="function"?P(t):null}function he(t){var e,_;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null){t.__e=t.__c.base=_.__e;break}return he(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&H.push(t)&&!B.__r++||oe!=d.debounceRendering)&&((oe=d.debounceRendering)||ue)(B)}function B(){for(var t,e,_,n,i,r,l,a=1;H.length;)H.length>a&&H.sort(ce),t=H.shift(),a=H.length,t.__d&&(_=void 0,n=void 0,i=(n=(e=t).__v).__e,r=[],l=[],e.__P&&((_=w({},n)).__v=n.__v+1,d.vnode&&d.vnode(_),Z(e.__P,_,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,i??P(n),!!(32&n.__u),l),_.__v=n.__v,_.__.__k[_.__i]=_,me(r,_,l),n.__e=n.__=null,_.__e!=i&&he(_)));B.__r=0}function de(t,e,_,n,i,r,l,a,c,s,f){var o,p,u,b,E,k,m,v=n&&n.__k||pe,x=e.length;for(c=Ve(_,e,v,c,x),o=0;o<x;o++)(u=_.__k[o])!=null&&(p=u.__i==-1?N:v[u.__i]||N,u.__i=o,k=Z(t,u,p,i,r,l,a,c,s,f),b=u.__e,u.ref&&p.ref!=u.ref&&(p.ref&&X(p.ref,null,u),f.push(u.ref,u.__c||b,u)),E==null&&b!=null&&(E=b),(m=!!(4&u.__u))||p.__k===u.__k?c=ve(u,c,t,m):typeof u.type=="function"&&k!==void 0?c=k:b&&(c=b.nextSibling),u.__u&=-7);return _.__e=E,c}function Ve(t,e,_,n,i){var r,l,a,c,s,f=_.length,o=f,p=0;for(t.__k=new Array(i),r=0;r<i;r++)(l=e[r])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=t.__k[r]=I(null,l,null,null,null):q(l)?l=t.__k[r]=I(S,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=t.__k[r]=I(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):t.__k[r]=l,c=r+p,l.__=t,l.__b=t.__b+1,a=null,(s=l.__i=ze(l,_,c,o))!=-1&&(o--,(a=_[s])&&(a.__u|=2)),a==null||a.__v==null?(s==-1&&(i>f?p--:i<f&&p++),typeof l.type!="function"&&(l.__u|=4)):s!=c&&(s==c-1?p--:s==c+1?p++:(s>c?p--:p++,l.__u|=4))):t.__k[r]=null;if(o)for(r=0;r<f;r++)(a=_[r])!=null&&(2&a.__u)==0&&(a.__e==n&&(n=P(a)),ge(a,a));return n}function ve(t,e,_,n){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=ve(i[r],e,_,n));return e}t.__e!=e&&(n&&(e&&t.type&&!e.parentNode&&(e=P(t)),_.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ze(t,e,_,n){var i,r,l,a=t.key,c=t.type,s=e[_],f=s!=null&&(2&s.__u)==0;if(s===null&&a==null||f&&a==s.key&&c==s.type)return _;if(n>(f?1:0)){for(i=_-1,r=_+1;i>=0||r<e.length;)if((s=e[l=i>=0?i--:r++])!=null&&(2&s.__u)==0&&a==s.key&&c==s.type)return l}return-1}function le(t,e,_){e[0]=="-"?t.setProperty(e,_??""):t[e]=_==null?"":typeof _!="number"||qe.test(e)?_:_+"px"}function O(t,e,_,n,i){var r,l;e:if(e=="style")if(typeof _=="string")t.style.cssText=_;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)_&&e in _||le(t.style,e,"");if(_)for(e in _)n&&_[e]==n[e]||le(t.style,e,_[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(fe,"$1")),l=e.toLowerCase(),e=l in t||e=="onFocusOut"||e=="onFocusIn"?l.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=_,_?n?_.u=n.u:(_.u=Y,t.addEventListener(e,r?J:G,r)):t.removeEventListener(e,r?J:G,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=_??"";break e}catch{}typeof _=="function"||(_==null||_===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&_==1?"":_))}}function se(t){return function(e){if(this.l){var _=this.l[e.type+t];if(e.t==null)e.t=Y++;else if(e.t<_.u)return;return _(d.event?d.event(e):e)}}}function Z(t,e,_,n,i,r,l,a,c,s){var f,o,p,u,b,E,k,m,v,x,R,L,M,re,F,U,z,C=e.type;if(e.constructor!==void 0)return null;128&_.__u&&(c=!!(32&_.__u),r=[a=e.__e=_.__e]),(f=d.__b)&&f(e);e:if(typeof C=="function")try{if(m=e.props,v="prototype"in C&&C.prototype.render,x=(f=C.contextType)&&n[f.__c],R=f?x?x.props.value:f.__:n,_.__c?k=(o=e.__c=_.__c).__=o.__E:(v?e.__c=o=new C(m,R):(e.__c=o=new W(m,R),o.constructor=C,o.render=Je),x&&x.sub(o),o.state||(o.state={}),o.__n=n,p=o.__d=!0,o.__h=[],o._sb=[]),v&&o.__s==null&&(o.__s=o.state),v&&C.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=w({},o.__s)),w(o.__s,C.getDerivedStateFromProps(m,o.__s))),u=o.props,b=o.state,o.__v=e,p)v&&C.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),v&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(v&&C.getDerivedStateFromProps==null&&m!==u&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(m,R),e.__v==_.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(m,o.__s,R)===!1){for(e.__v!=_.__v&&(o.props=m,o.state=o.__s,o.__d=!1),e.__e=_.__e,e.__k=_.__k,e.__k.some(function(A){A&&(A.__=e)}),L=0;L<o._sb.length;L++)o.__h.push(o._sb[L]);o._sb=[],o.__h.length&&l.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(m,o.__s,R),v&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(u,b,E)})}if(o.context=R,o.props=m,o.__P=t,o.__e=!1,M=d.__r,re=0,v){for(o.state=o.__s,o.__d=!1,M&&M(e),f=o.render(o.props,o.state,o.context),F=0;F<o._sb.length;F++)o.__h.push(o._sb[F]);o._sb=[]}else do o.__d=!1,M&&M(e),f=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++re<25);o.state=o.__s,o.getChildContext!=null&&(n=w(w({},n),o.getChildContext())),v&&!p&&o.getSnapshotBeforeUpdate!=null&&(E=o.getSnapshotBeforeUpdate(u,b)),U=f,f!=null&&f.type===S&&f.key==null&&(U=ye(f.props.children)),a=de(t,q(U)?U:[U],e,_,n,i,r,l,a,c,s),o.base=e.__e,e.__u&=-161,o.__h.length&&l.push(o),k&&(o.__E=o.__=null)}catch(A){if(e.__v=null,c||r!=null)if(A.then){for(e.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,e.__e=a}else{for(z=r.length;z--;)K(r[z]);Q(e)}else e.__e=_.__e,e.__k=_.__k,A.then||Q(e);d.__e(A,e,_)}else r==null&&e.__v==_.__v?(e.__k=_.__k,e.__e=_.__e):a=e.__e=Ge(_.__e,e,_,n,i,r,l,c,s);return(f=d.diffed)&&f(e),128&e.__u?void 0:a}function Q(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Q)}function me(t,e,_){for(var n=0;n<_.length;n++)X(_[n],_[++n],_[++n]);d.__c&&d.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){d.__e(r,i.__v)}})}function ye(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:q(t)?t.map(ye):w({},t)}function Ge(t,e,_,n,i,r,l,a,c){var s,f,o,p,u,b,E,k=_.props||N,m=e.props,v=e.type;if(v=="svg"?i="http://www.w3.org/2000/svg":v=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(s=0;s<r.length;s++)if((u=r[s])&&"setAttribute"in u==!!v&&(v?u.localName==v:u.nodeType==3)){t=u,r[s]=null;break}}if(t==null){if(v==null)return document.createTextNode(m);t=document.createElementNS(i,v,m.is&&m),a&&(d.__m&&d.__m(e,r),a=!1),r=null}if(v==null)k===m||a&&t.data==m||(t.data=m);else{if(r=r&&j.call(t.childNodes),!a&&r!=null)for(k={},s=0;s<t.attributes.length;s++)k[(u=t.attributes[s]).name]=u.value;for(s in k)if(u=k[s],s!="children"){if(s=="dangerouslySetInnerHTML")o=u;else if(!(s in m)){if(s=="value"&&"defaultValue"in m||s=="checked"&&"defaultChecked"in m)continue;O(t,s,null,u,i)}}for(s in m)u=m[s],s=="children"?p=u:s=="dangerouslySetInnerHTML"?f=u:s=="value"?b=u:s=="checked"?E=u:a&&typeof u!="function"||k[s]===u||O(t,s,u,k[s],i);if(f)a||o&&(f.__html==o.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(o&&(t.innerHTML=""),de(e.type=="template"?t.content:t,q(p)?p:[p],e,_,n,v=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,l,r?r[0]:_.__k&&P(_,0),a,c),r!=null)for(s=r.length;s--;)K(r[s]);a||(s="value",v=="progress"&&b==null?t.removeAttribute("value"):b!=null&&(b!==t[s]||v=="progress"&&!b||v=="option"&&b!=k[s])&&O(t,s,b,k[s],i),s="checked",E!=null&&E!=t[s]&&O(t,s,E,k[s],i))}return t}function X(t,e,_){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(i){d.__e(i,_)}}function ge(t,e,_){var n,i;if(d.unmount&&d.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||X(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(r){d.__e(r,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&ge(n[i],e,_||typeof t.type!="function");_||K(t.__e),t.__c=t.__=t.__e=void 0}function Je(t,e,_){return this.constructor(t,_)}function be(t,e,_){var n,i,r,l;e==document&&(e=document.documentElement),d.__&&d.__(t,e),i=(n=typeof _=="function")?null:_&&_.__k||e.__k,r=[],l=[],Z(e,t=(!n&&_||e).__k=$e(S,null,[t]),i||N,N,e.namespaceURI,!n&&_?[_]:i?null:e.firstChild?j.call(e.childNodes):null,r,!n&&_?_:i?i.__e:e.firstChild,n,l),me(r,t,l)}j=pe.slice,d={__e:function(t,e,_,n){for(var i,r,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),l=i.__d),l)return i.__E=i}catch(a){t=a}throw t}},ae=0,Be=function(t){return t!=null&&t.constructor===void 0},W.prototype.setState=function(t,e){var _;_=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=w({},this.state),typeof t=="function"&&(t=t(w({},_),this.props)),t&&w(_,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},W.prototype.render=S,H=[],ue=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ce=function(t,e){return t.__v.__b-e.__v.__b},B.__r=0,fe=/(PointerCapture)$|Capture$/i,Y=0,G=se(!1),J=se(!0),je=0;var V,y,ee,ke,D=0,Te=[],g=d,Ee=g.__b,Ce=g.__r,we=g.diffed,xe=g.__c,Se=g.unmount,Re=g.__;function Ae(t,e){g.__h&&g.__h(y,t,D||e),D=0;var _=y.__H||(y.__H={__:[],__h:[]});return t>=_.__.length&&_.__.push({}),_.__[t]}function Pe(t){return D=1,_e(Ne,t)}function _e(t,e,_){var n=Ae(V++,2);if(n.t=t,!n.__c&&(n.__=[_?_(e):Ne(void 0,e),function(a){var c=n.__N?n.__N[0]:n.__[0],s=n.t(c,a);c!==s&&(n.__N=[s,n.__[1]],n.__c.setState({}))}],n.__c=y,!y.__f)){var i=function(a,c,s){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!r||r.call(this,a,c,s);var o=n.__c.props!==a;return f.forEach(function(p){if(p.__N){var u=p.__[0];p.__=p.__N,p.__N=void 0,u!==p.__[0]&&(o=!0)}}),r&&r.call(this,a,c,s)||o};y.__f=!0;var r=y.shouldComponentUpdate,l=y.componentWillUpdate;y.componentWillUpdate=function(a,c,s){if(this.__e){var f=r;r=void 0,i(a,c,s),r=f}l&&l.call(this,a,c,s)},y.shouldComponentUpdate=i}return n.__N||n.__}function Me(t){return D=5,Ue(function(){return{current:t}},[])}function Ue(t,e){var _=Ae(V++,7);return Ke(_.__H,e)&&(_.__=t(),_.__H=e,_.__h=t),_.__}function T(t,e){return D=8,Ue(function(){return t},e)}function Qe(){for(var t;t=Te.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach($),t.__H.__h.forEach(te),t.__H.__h=[]}catch(e){t.__H.__h=[],g.__e(e,t.__v)}}g.__b=function(t){y=null,Ee&&Ee(t)},g.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Re&&Re(t,e)},g.__r=function(t){Ce&&Ce(t),V=0;var e=(y=t.__c).__H;e&&(ee===y?(e.__h=[],y.__h=[],e.__.forEach(function(_){_.__N&&(_.__=_.__N),_.u=_.__N=void 0})):(e.__h.forEach($),e.__h.forEach(te),e.__h=[],V=0)),ee=y},g.diffed=function(t){we&&we(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Te.push(e)!==1&&ke===g.requestAnimationFrame||((ke=g.requestAnimationFrame)||Ye)(Qe)),e.__H.__.forEach(function(_){_.u&&(_.__H=_.u),_.u=void 0})),ee=y=null},g.__c=function(t,e){e.some(function(_){try{_.__h.forEach($),_.__h=_.__h.filter(function(n){return!n.__||te(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],g.__e(n,_.__v)}}),xe&&xe(t,e)},g.unmount=function(t){Se&&Se(t);var e,_=t.__c;_&&_.__H&&(_.__H.__.forEach(function(n){try{$(n)}catch(i){e=i}}),_.__H=void 0,e&&g.__e(e,_.__v))};var He=typeof requestAnimationFrame=="function";function Ye(t){var e,_=function(){clearTimeout(n),He&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(_,35);He&&(e=requestAnimationFrame(_))}function $(t){var e=y,_=t.__c;typeof _=="function"&&(t.__c=void 0,_()),y=e}function te(t){var e=y;t.__c=t.__(),y=e}function Ke(t,e){return!t||t.length!==e.length||e.some(function(_,n){return _!==t[n]})}function Ne(t,e){return typeof e=="function"?e(t):e}async function ne({query:t,lastCursor:e}){let _=new URLSearchParams;t&&_.set("q",t),e&&_.set("last_last_edited_at",e);let n=await fetch(`/admin/api/entries?${_.toString()}`);if(!n.ok)throw new Error("Failed to fetch entries");return n.json()}async function De(t){let e=await fetch("/admin/api/entries/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t})});if(!e.ok)throw new Error("Failed to create entry");return e.json()}var Ze=0;function h(t,e,_,n,i,r){e||(e={});var l,a,c=e;if("ref"in c)for(a in c={},e)a=="ref"?l=e[a]:c[a]=e[a];var s={type:t,props:c,key:_,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ze,__i:-1,__u:0,__source:i,__self:r};if(typeof t=="function"&&(l=t.defaultProps))for(a in l)c[a]===void 0&&(c[a]=l[a]);return d.vnode&&d.vnode(s),s}function Le({entry:t}){let e=`entry-card${t.visibility==="private"?" private":""}`;return h("a",{href:`/admin/entries/edit?path=${t.path}`,class:e,children:h("div",{class:"entry-card-content",children:[h("h3",{class:"entry-title",children:t.title}),t.image_url&&h("img",{src:t.image_url,class:"entry-image",alt:""}),h("p",{class:"entry-body",children:t.body_preview})]})})}function Fe({entries:t}){return h("div",{class:"entry-grid",children:t.map(e=>h(Le,{entry:e},e.path))})}function Oe(){let[t,e]=Pe(!1),_=T(async n=>{if(n.preventDefault(),!t){e(!0);try{let r=new Date().toISOString().slice(0,19).replace(/[-:]/g,"").replace("T",""),l=await De(r);l.ok&&l.redirect&&(window.location.href=l.redirect)}catch{e(!1)}}},[t]);return h("button",{type:"button",class:"btn-new-entry",onClick:_,disabled:t,children:[h("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",children:[h("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),h("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),t?"Creating...":"New Entry"]})}function Ie({onSearch:t}){let e=T(_=>{t(_.target.value)},[t]);return h("div",{class:"search-box",children:h("input",{type:"text",placeholder:"Search entries...",onInput:e,autocomplete:"off"})})}function Xe(t,e){switch(e.type){case"SET_QUERY":return{...t,query:e.query};case"SEARCH_START":return{...t,loading:!0};case"SEARCH_RESULT":return{...t,entries:e.entries,hasMore:e.hasMore,lastCursor:e.lastCursor,loading:!1};case"LOAD_MORE_RESULT":return{...t,entries:[...t.entries,...e.entries],hasMore:e.hasMore,lastCursor:e.lastCursor,loading:!1};case"SEARCH_ERROR":return{...t,loading:!1};default:return t}}function We({initData:t}){let[e,_]=_e(Xe,{entries:t.entries||[],hasMore:t.has_more,lastCursor:t.last_cursor,query:"",loading:!1}),n=Me(null),i=T(l=>{_({type:"SET_QUERY",query:l}),n.current&&clearTimeout(n.current),n.current=setTimeout(async()=>{_({type:"SEARCH_START"});try{let a=await ne({query:l});_({type:"SEARCH_RESULT",entries:a.entries||[],hasMore:a.has_more,lastCursor:a.last_cursor})}catch{_({type:"SEARCH_ERROR"})}},500)},[]),r=T(async()=>{if(!(e.loading||!e.hasMore)){_({type:"SEARCH_START"});try{let l=await ne({query:e.query,lastCursor:e.lastCursor});_({type:"LOAD_MORE_RESULT",entries:l.entries||[],hasMore:l.has_more,lastCursor:l.last_cursor})}catch{_({type:"SEARCH_ERROR"})}}},[e.loading,e.hasMore,e.query,e.lastCursor]);return h(S,{children:[h("div",{class:"search-and-actions",children:[h(Ie,{onSearch:i}),h(Oe,{})]}),h(Fe,{entries:e.entries}),e.hasMore&&h("div",{class:"load-more",children:h("button",{type:"button",onClick:r,disabled:e.loading,children:e.loading?"Loading...":"Load More"})})]})}var et=document.getElementById("entries-data"),tt=JSON.parse(et.textContent),_t=document.getElementById("entry-list-app");be(h(We,{initData:tt}),_t);
